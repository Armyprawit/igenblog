function updateVideoYoutube(e,t,a,n,o,i){console.log("http:"+t+" / category:"+a+" / Status:"+n);var r="",s="";0==n?r="บันทึกแบบร่าง":1==n&&(r="เผยแพร่ทันที"),0==t?s="http":1==t&&(s="https"),1==o&&($("#loading").html(' <i class="fa fa-spinner fa-spin"></i> รอสักครู่...'),$("#setting").html('<i class="fa fa-cog"></i> '+s+" / "+r+" / "+a)),0==t?href="http://gdata.youtube.com/feeds/api/users/"+e+"/uploads?v=2&alt=jsonc&start-index="+o+"&max-results="+i:1==t&&(href="https://gdata.youtube.com/feeds/api/users/"+e+"/uploads?v=2&alt=jsonc&start-index="+o+"&max-results="+i),$.ajax({url:href,error:function(){console.log("Request session again!"),wait++,$("#updateResult").prepend('<div class="waitItem" id="waitItem'+wait+'"><i class="fa fa-exclamation-circle"></i> กำลังขอ Session ใหม่อีกครั้ง ['+wait+"]</div>"),$("#waitItem"+wait).hide().slideDown(700),updateVideoYoutube(e,t,a,n,o,i)}}).done(function(r){$("#process").html(o+' / <span class="t">'+r.data.totalItems+"<span>"),totalVideo=r.data.totalItems,$.each(r.data.items,function(e,t){var i=t.description;i=i.replace(/\r?\n/g,"<br>"),newVideoUpdate(a,t.title,i,t.duration,"keyword",t.thumbnail.sqDefault,t.thumbnail.hqDefault,t.id,t.uploader,1,n,o)}),o+=i,wait=0,o>totalVideo?$("#loading").html(' <i class="fa fa-check-circle-o"></i> อัพเดทแล้ว'):updateVideoYoutube(e,t,a,n,o,i)}).error()}function newVideoUpdate(e,t,a,n,o,i,r,s,c,d,l,p){if(""==username)return!1;if(newUpdate=!1,window.XMLHttpRequest)newUpdate=new XMLHttpRequest,newUpdate.overrideMimeType&&newUpdate.overrideMimeType("text/html");else if(window.ActiveXObject)try{newUpdate=new ActiveXObject("Msxml2.XMLHTTP")}catch(m){try{newUpdate=new ActiveXObject("Microsoft.XMLHTTP")}catch(m){}}if(!newUpdate)return alert("Cannot create XMLHTTP instance"),!1;var u="process/process-video-youtube-update.php",w="category="+e+"&title="+t+"&text="+a+"&duration="+n+"&keyword="+o+"&image_mini="+i+"&image_hd="+r+"&code="+s+"&uploader="+c+"&type="+d+"&status="+l+"&start="+p;newUpdate.open("POST",u,!0),newUpdate.setRequestHeader("Content-type","application/x-www-form-urlencoded"),newUpdate.send(w),newUpdate.onreadystatechange=function(){3==newUpdate.readyState,4==newUpdate.readyState&&($("#updateResult").prepend(newUpdate.responseText),$("#vidItem"+p).hide().slideDown(700))}}function getMetaChannel(e){if(""==e)return!1;if($("#btn-loading").html('<i class="fa fa-spinner fa-spin"></i>'),yt=!1,window.XMLHttpRequest)yt=new XMLHttpRequest,yt.overrideMimeType&&yt.overrideMimeType("text/html");else if(window.ActiveXObject)try{yt=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{yt=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}if(!yt)return alert("Cannot create XMLHTTP instance"),!1;var a="process/get-meta-channel.php",n="username="+e;yt.open("POST",a,!0),yt.setRequestHeader("Content-type","application/x-www-form-urlencoded"),yt.send(n),yt.onreadystatechange=function(){3==yt.readyState,4==yt.readyState&&(usernames!=e&&$("#list").prepend(yt.responseText),usernames=e,$("#btn-loading").html('<i class="fa fa-check-circle-o"></i>'))}}function createChannel(e){if(state=!0,showLiveView("close"),$("#console").animate({bottom:"0px"},800),create=!1,window.XMLHttpRequest)create=new XMLHttpRequest,create.overrideMimeType&&create.overrideMimeType("text/html");else if(window.ActiveXObject)try{create=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{create=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}if(!create)return alert("Cannot create XMLHTTP instance"),!1;var a="process/process-channel-create.php",n="username="+e;create.open("POST",a,!0),create.setRequestHeader("Content-type","application/x-www-form-urlencoded"),create.send(n),create.onreadystatechange=function(){3==create.readyState,4==create.readyState&&($("#console").fadeIn(200).html(create.responseText),$("#console").delay(3e3).animate({bottom:"-50px"},500),modeListChannel(),$("#username").val(""))}}function editVideo(e,t,a,n,o){if(state=!0,showLiveView("close"),$("#console").animate({bottom:"0px"},800),editForm=!1,window.XMLHttpRequest)editForm=new XMLHttpRequest,editForm.overrideMimeType&&editForm.overrideMimeType("text/html");else if(window.ActiveXObject)try{editForm=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){try{editForm=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}if(!editForm)return alert("Cannot editForm XMLHTTP instance"),!1;var r="process/process-video-edit.php";n=n.replace(/\r?\n/g,"<br>");var s="id="+e+"&category="+t+"&title="+a+"&description="+n+"&keyword="+o;editForm.open("POST",r,!0),editForm.setRequestHeader("Content-type","application/x-www-form-urlencoded"),editForm.send(s),editForm.onreadystatechange=function(){3==editForm.readyState,4==editForm.readyState&&($("#console").fadeIn(200).html(edit.responseText),$("#console").delay(3e3).animate({bottom:"-50px"},400),toSelectVideo(e),modeListVideo())}}function statusChannel(e,t){if(state=!0,$("#loading-"+e).fadeIn(200).html('<i class="fa fa-spinner fa-spin"></i>'),status_s=!1,window.XMLHttpRequest)status_s=new XMLHttpRequest,status_s.overrideMimeType&&status_s.overrideMimeType("text/html");else if(window.ActiveXObject)try{status_s=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{status_s=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}if(!status_s)return alert("Cannot status_s XMLHTTP instance"),!1;var n="process/process-channel-status.php",o="id="+e+"&stat="+t;status_s.open("POST",n,!0),status_s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),status_s.send(o),status_s.onreadystatechange=function(){3==status_s.readyState&&$("#console").html('<i class="fa fa-spinner fa-spin"></i> รอสักครู่...'),4==status_s.readyState&&($("#status-"+e).html(status_s.responseText),$("#loading-"+e).fadeIn(200).html(""))}}function modeListChannel(){if(state=!0,$("#list").fadeOut(100),mode=!1,window.XMLHttpRequest)mode=new XMLHttpRequest,mode.overrideMimeType&&mode.overrideMimeType("text/html");else if(window.ActiveXObject)try{mode=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{mode=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}if(!mode)return alert("Cannot mode XMLHTTP instance"),!1;var t="process/mode-channel.php",a="id=0";mode.open("POST",t,!0),mode.setRequestHeader("Content-type","application/x-www-form-urlencoded"),mode.send(a),mode.onreadystatechange=function(){3==mode.readyState,4==mode.readyState&&$("#list").fadeIn(200).html(mode.responseText)},index=5}function searchVideo(e){if(state=!1,search=!1,window.XMLHttpRequest)search=new XMLHttpRequest,search.overrideMimeType&&search.overrideMimeType("text/html");else if(window.ActiveXObject)try{search=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{search=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}if(!search)return alert("Cannot search XMLHTTP instance"),!1;var a="process/process-video-search.php",n="q="+e;search.open("POST",a,!0),search.setRequestHeader("Content-type","application/x-www-form-urlencoded"),search.send(n),search.onreadystatechange=function(){3==search.readyState&&$("#console").html('<i class="fa fa-spinner fa-spin"></i> รอสักครู่...'),4==search.readyState&&$("#list").html(search.responseText)},index=5,console.log("set index = 5"),""==e&&(modeListVideo(),state=!0)}function loadingChannel(e){if(state=!0,loading=!1,$("#loadingProcess").slideDown("fast"),window.XMLHttpRequest)loading=new XMLHttpRequest,loading.overrideMimeType&&loading.overrideMimeType("text/html");else if(window.ActiveXObject)try{loading=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{loading=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}if(!loading)return alert("Cannot loading XMLHTTP instance"),!1;var a="process/process-channel-loading.php",n="start="+e;loading.open("POST",a,!0),loading.setRequestHeader("Content-type","application/x-www-form-urlencoded"),loading.send(n),loading.onreadystatechange=function(){3==loading.readyState,4==loading.readyState&&($("#list").append(loading.responseText),console.log("start:"+e),index+=5,$("#loadingProcess").slideUp("fast"))}}function toSelectChannel(e){if($("#result").fadeOut(100),editForm=!1,window.XMLHttpRequest)editForm=new XMLHttpRequest,editForm.overrideMimeType&&editForm.overrideMimeType("text/html");else if(window.ActiveXObject)try{editForm=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{editForm=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}if(!editForm)return alert("Cannot editForm XMLHTTP instance"),!1;var a="process/update-channel.php",n="id="+e;editForm.open("POST",a,!0),editForm.setRequestHeader("Content-type","application/x-www-form-urlencoded"),editForm.send(n),editForm.onreadystatechange=function(){3==editForm.readyState,4==editForm.readyState&&$("#result").fadeIn(200).html(editForm.responseText)}}function toCreateVideo(){if(state=!0,createform=!1,window.XMLHttpRequest)createform=new XMLHttpRequest,createform.overrideMimeType&&createform.overrideMimeType("text/html");else if(window.ActiveXObject)try{createform=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{createform=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}if(!createform)return alert("Cannot createform XMLHTTP instance"),!1;var t="process/process-video-createform.php",a="id=0";createform.open("POST",t,!0),createform.setRequestHeader("Content-type","application/x-www-form-urlencoded"),createform.send(a),createform.onreadystatechange=function(){3==createform.readyState,4==createform.readyState&&$("#result").fadeIn(200).html(createform.responseText)}}var yt=!1,create=!1,createform=!1,editForm=!1,example=!1,loading=!1,mode=!1,search=!1,status_s=!1,index=5,state=!0,update=!1,totalVideo=0,wait=0,href="",usernames="";$(window).scroll(function(){$(window).scrollTop()+$(window).height()>=$(document).height()-50&&state&&loadingChannel(index)});